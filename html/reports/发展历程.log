Traceback (most recent call last):
  File "e:\anaconda3\lib\site-packages\jupyter_cache\executors\utils.py", line 56, in single_nb_execution
    record_timing=False,
  File "e:\anaconda3\lib\site-packages\nbclient\client.py", line 1087, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "e:\anaconda3\lib\site-packages\nbclient\util.py", line 74, in wrapped
    return just_run(coro(*args, **kwargs))
  File "e:\anaconda3\lib\site-packages\nbclient\util.py", line 53, in just_run
    return loop.run_until_complete(coro)
  File "e:\anaconda3\lib\asyncio\base_events.py", line 583, in run_until_complete
    return future.result()
  File "e:\anaconda3\lib\site-packages\nbclient\client.py", line 541, in async_execute
    cell, index, execution_count=self.code_cells_executed + 1
  File "e:\anaconda3\lib\site-packages\nbclient\client.py", line 832, in async_execute_cell
    self._check_raise_for_error(cell, exec_reply)
  File "e:\anaconda3\lib\site-packages\nbclient\client.py", line 740, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply['content'])
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
block_density = pd.DataFrame([
    {"线网密度":3.818,"街道名称":"东门"},
    {"线网密度":3.024,"街道名称":"福保"},
    {"线网密度":2.932,"街道名称":"华富"},
    {"线网密度":2.834,"街道名称":"东晓"},
    {"线网密度":2.191,"街道名称":"南湖"},
    {"线网密度":2.022,"街道名称":"莲塘"},
    {"线网密度":1.927,"街道名称":"笋岗"},
    {"线网密度":1.914,"街道名称":"桂园"},
    {"线网密度":1.879,"街道名称":"莲花"},
    {"线网密度":1.754,"街道名称":"清水河"},
    {"线网密度":1.744,"街道名称":"南头"},
    {"线网密度":1.6,"街道名称":"翠竹"},
    {"线网密度":1.568,"街道名称":"东湖"},
    {"线网密度":1.362,"街道名称":"福田"},
    {"线网密度":1.298,"街道名称":"沙头"},
    {"线网密度":1.293,"街道名称":"华强北"},
    {"线网密度":1.267,"街道名称":"园岭"},
    {"线网密度":1.232,"街道名称":"民治"},
    {"线网密度":1.216,"街道名称":"粤海"},
    {"线网密度":1.215,"街道名称":"梅沙"},
    {"线网密度":1.075,"街道名称":"西丽"},
    {"线网密度":1.074,"街道名称":"沙头角"},
    {"线网密度":1.05,"街道名称":"南园"},
    {"线网密度":1.01,"街道名称":"黄贝"},
    {"线网密度":0.842,"街道名称":"梅林"},
    {"线网密度":0.828,"街道名称":"招商"},
    {"线网密度":0.804,"街道名称":"布吉"},
    {"线网密度":0.78,"街道名称":"福海"},
    {"线网密度":0.7,"街道名称":"横岗"},
    {"线网密度":0.593,"街道名称":"桃源"},
    {"线网密度":0.569,"街道名称":"平湖"},
    {"线网密度":0.496,"街道名称":"南山"},
    {"线网密度":0.426,"街道名称":"大浪"},
    {"线网密度":0.391,"街道名称":"龙城"},
    {"线网密度":0.389,"街道名称":"沙井"},
    {"线网密度":0.35,"街道名称":"蛇口"},
    {"线网密度":0.347,"街道名称":"吉华"},
    {"线网密度":0.329,"街道名称":"凤凰"},
    {"线网密度":0.288,"街道名称":"马田"},
    {"线网密度":0.284,"街道名称":"沙河"},
    {"线网密度":0.269,"街道名称":"新湖"},
    {"线网密度":0.259,"街道名称":"福永"},
    {"线网密度":0.25,"街道名称":"福城"},
    {"线网密度":0.238,"街道名称":"燕罗"},
    {"线网密度":0.234,"街道名称":"新安"},
    {"线网密度":0.229,"街道名称":"西乡"},
    {"线网密度":0.229,"街道名称":"宝龙"},
    {"线网密度":0.225,"街道名称":"观湖"},
    {"线网密度":0.223,"街道名称":"龙岗"},
    {"线网密度":0.223,"街道名称":"公明"},
    {"线网密度":0.203,"街道名称":"海山"},
    {"线网密度":0.198,"街道名称":"光明"},
    {"线网密度":0.17,"街道名称":"坂田"},
    {"线网密度":0.167,"街道名称":"观澜"},
    {"线网密度":0.152,"街道名称":"石岩"},
    {"线网密度":0.149,"街道名称":"龙华"},
    {"线网密度":0.117,"街道名称":"新桥"},
    {"线网密度":0.114,"街道名称":"航城"},
    {"线网密度":0.103,"街道名称":"坪地"},
    {"线网密度":0.071,"街道名称":"香蜜湖"},
    {"线网密度":0.055,"街道名称":"玉塘"},
    {"线网密度":0.028,"街道名称":"松岗"},
    {"线网密度":0,"街道名称":"盐田"},
    {"线网密度":0,"街道名称":"园山"},
    {"线网密度":0,"街道名称":"南湾"},
    {"线网密度":0,"街道名称":"碧岭"},
    {"线网密度":0,"街道名称":"石井"},
    {"线网密度":0,"街道名称":"龙田"},
    {"线网密度":0,"街道名称":"坑梓"},
    {"线网密度":0,"街道名称":"坪山"},
    {"线网密度":0,"街道名称":"马峦"},
    {"线网密度":0,"街道名称":"南澳"},
    {"线网密度":0,"街道名称":"大鹏"},
    {"线网密度":0,"街道名称":"葵涌"}
])
block_density_dict = dict(zip(block_density['街道名称'],block_density['线网密度']))
area_gdf = gpd.read_file(r'G:\DeskTop\11_JupyterLabTest\dash_learning\入门\sz_group.geojson')
line_gdf = gpd.read_file(r'G:\DeskTop\11_JupyterLabTest\dash_learning\入门\sz_metro_line.geojson')
area_gdf['density'] = area_gdf['NAME'].apply(lambda x:block_density_dict[x])
map_2.add_data(data=line_gdf, name='line')
map_2.add_data(data=area_gdf, name='block')
config = {
  "version": "v1",
  "config": {
    "visState": {
      "filters": [],
      "layers": [
        {
          "id": "w50aqdd",
          "type": "geojson",
          "config": {
            "dataId": "line",
            "label": "line",
            "color": [
              34,
              63,
              154
            ],
            "columns": {
              "geojson": "geometry"
            },
            "isVisible": True,
            "visConfig": {
              "opacity": 0.8,
              "strokeOpacity": 0.8,
              "thickness": 0.9,
              "strokeColor": None,
              "colorRange": {
                "name": "Global Warming",
                "type": "sequential",
                "category": "Uber",
                "colors": [
                  "#5A1846",
                  "#900C3F",
                  "#C70039",
                  "#E3611C",
                  "#F1920E",
                  "#FFC300"
                ]
              },
              "strokeColorRange": {
                "name": "ColorBrewer Paired-9",
                "type": "qualitative",
                "category": "ColorBrewer",
                "colors": [
                  "#a6cee3",
                  "#1f78b4",
                  "#b2df8a",
                  "#33a02c",
                  "#fb9a99",
                  "#e31a1c",
                  "#fdbf6f",
                  "#ff7f00",
                  "#cab2d6"
                ]
              },
              "radius": 10,
              "sizeRange": [
                0,
                10
              ],
              "radiusRange": [
                0,
                50
              ],
              "heightRange": [
                0,
                500
              ],
              "elevationScale": 5,
              "stroked": True,
              "filled": False,
              "enable3d": False,
              "wireframe": False
            },
            "hidden": False,
            "textLabel": [
              {
                "field": None,
                "color": [
                  255,
                  255,
                  255
                ],
                "size": 18,
                "offset": [
                  0,
                  0
                ],
                "anchor": "start",
                "alignment": "center"
              }
            ]
          },
          "visualChannels": {
            "colorField": None,
            "colorScale": "quantile",
            "sizeField": None,
            "sizeScale": "linear",
            "strokeColorField": {
              "name": "route_name",
              "type": "string"
            },
            "strokeColorScale": "ordinal",
            "heightField": None,
            "heightScale": "linear",
            "radiusField": None,
            "radiusScale": "linear"
          }
        },
        {
          "id": "h3m5ah2",
          "type": "geojson",
          "config": {
            "dataId": "block",
            "label": "block",
            "color": [
              26,
              49,
              119
            ],
            "columns": {
              "geojson": "geometry"
            },
            "isVisible": True,
            "visConfig": {
              "opacity": 0.64,
              "strokeOpacity": 0.8,
              "thickness": 0.5,
              "strokeColor": [
                32,
                103,
                172
              ],
              "colorRange": {
                "name": "Uber Viz Diverging 3.5",
                "type": "diverging",
                "category": "Uber",
                "colors": [
                  "#00939C",
                  "#2FA7AE",
                  "#5DBABF",
                  "#8CCED1",
                  "#BAE1E2",
                  "#F8C0AA",
                  "#EB9C80",
                  "#DD7755",
                  "#D0532B",
                  "#C22E00"
                ]
              },
              "strokeColorRange": {
                "name": "Global Warming",
                "type": "sequential",
                "category": "Uber",
                "colors": [
                  "#5A1846",
                  "#900C3F",
                  "#C70039",
                  "#E3611C",
                  "#F1920E",
                  "#FFC300"
                ]
              },
              "radius": 10,
              "sizeRange": [
                0,
                10
              ],
              "radiusRange": [
                0,
                50
              ],
              "heightRange": [
                0,
                500
              ],
              "elevationScale": 5,
              "stroked": True,
              "filled": True,
              "enable3d": False,
              "wireframe": False
            },
            "hidden": False,
            "textLabel": [
              {
                "field": None,
                "color": [
                  255,
                  255,
                  255
                ],
                "size": 18,
                "offset": [
                  0,
                  0
                ],
                "anchor": "start",
                "alignment": "center"
              }
            ]
          },
          "visualChannels": {
            "colorField": {
              "name": "density",
              "type": "real"
            },
            "colorScale": "quantile",
            "sizeField": None,
            "sizeScale": "linear",
            "strokeColorField": None,
            "strokeColorScale": "quantile",
            "heightField": None,
            "heightScale": "linear",
            "radiusField": None,
            "radiusScale": "linear"
          }
        }
      ],
      "interactionConfig": {
        "tooltip": {
          "fieldsToShow": {
            "block": [
              {
                "name": "NAME",
                "format": None
              },
              {
                "name": "density",
                "format": None
              }
            ],
            "line": [
              {
                "name": "link_type",
                "format": None
              },
              {
                "name": "route_name",
                "format": None
              }
            ]
          },
          "compareMode": False,
          "compareType": "absolute",
          "enabled": True
        },
        "brush": {
          "size": 0.5,
          "enabled": False
        },
        "geocoder": {
          "enabled": False
        },
        "coordinate": {
          "enabled": False
        }
      },
      "layerBlending": "normal",
      "splitMaps": [],
      "animationConfig": {
        "currentTime": None,
        "speed": 1
      }
    },
    "mapState": {
      "bearing": 0,
      "dragRotate": False,
      "latitude": 22.662742768390604,
      "longitude": 114.21157724223173,
      "pitch": 0,
      "zoom": 8.903882166166095,
      "isSplit": False
    },
    "mapStyle": {
      "styleType": "dark",
      "topLayerGroups": {},
      "visibleLayerGroups": {
        "label": True,
        "road": True,
        "border": False,
        "building": True,
        "water": True,
        "land": True,
        "3d building": False
      },
      "threeDBuildingColor": [
        9.665468314072013,
        17.18305478057247,
        31.1442867897876
      ],
      "mapStyles": {}
    }
  }
}
map_2.config=config
map_2
------------------

[1;31m---------------------------------------------------------------------------[0m
[1;31mNameError[0m                                 Traceback (most recent call last)
[1;32m<ipython-input-6-1c894a0e8582>[0m in [0;36m<module>[1;34m[0m
[0;32m     79[0m [0mline_gdf[0m [1;33m=[0m [0mgpd[0m[1;33m.[0m[0mread_file[0m[1;33m([0m[1;34mr'G:\DeskTop\11_JupyterLabTest\dash_learning\入门\sz_metro_line.geojson'[0m[1;33m)[0m[1;33m[0m[1;33m[0m[0m
[0;32m     80[0m [0marea_gdf[0m[1;33m[[0m[1;34m'density'[0m[1;33m][0m [1;33m=[0m [0marea_gdf[0m[1;33m[[0m[1;34m'NAME'[0m[1;33m][0m[1;33m.[0m[0mapply[0m[1;33m([0m[1;32mlambda[0m [0mx[0m[1;33m:[0m[0mblock_density_dict[0m[1;33m[[0m[0mx[0m[1;33m][0m[1;33m)[0m[1;33m[0m[1;33m[0m[0m
[1;32m---> 81[1;33m [0mmap_2[0m[1;33m.[0m[0madd_data[0m[1;33m([0m[0mdata[0m[1;33m=[0m[0mline_gdf[0m[1;33m,[0m [0mname[0m[1;33m=[0m[1;34m'line'[0m[1;33m)[0m[1;33m[0m[1;33m[0m[0m
[0m[0;32m     82[0m [0mmap_2[0m[1;33m.[0m[0madd_data[0m[1;33m([0m[0mdata[0m[1;33m=[0m[0marea_gdf[0m[1;33m,[0m [0mname[0m[1;33m=[0m[1;34m'block'[0m[1;33m)[0m[1;33m[0m[1;33m[0m[0m
[0;32m     83[0m config = {

[1;31mNameError[0m: name 'map_2' is not defined
NameError: name 'map_2' is not defined

